<app-navbar></app-navbar>
<div class="container mt-4">
  <h2 class="text-center mb-4">Mi Carrito</h2>

  <div *ngIf="cartItems.length === 0" class="alert alert-info text-center">
    Tu carrito está vacío.
  </div>

  <div *ngIf="cartItems.length > 0" class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Imagen</th>
          <th>Producto</th>
          <th>Modelo</th>
          <th>Medidas</th>
          <th>Cantidad</th>
          <th>Precio Unitario</th>
          <th>Precio Total</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems">
          <td>{{ item.product?.name }}</td>
          <td>{{ item.model }}</td>
          <td>{{ item.height }} x {{ item.width }}</td>
          <td>
            <input
              type="number"
              [(ngModel)]="item.quantity"
              class="form-control form-control-sm w-50"
              min="1"
              (change)="updateQuantity(item)"
            />
          </td>
          <td>${{ item.product?.price }}</td>
          <td>${{ item.precio_total }}</td>
          <td>
            <button class="btn btn-danger btn-sm" (click)="deleteFromCart(item.cart_id)">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="text-end mt-3">
      <h4>Total: ${{ getTotal() }}</h4>
      <button class="btn btn-success">Finalizar compra</button>
    </div>
  </div>
</div>
